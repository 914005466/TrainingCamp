<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>封装fetch</title>
</head>
<body>
    <button id="btn1">点击get请求</button>
    <hr>
    <input type="text" id="username" placeholder="请输入用户名">
    <input type="text" id="age" placeholder="请输入年龄">
    <input type="text" id="sex" placeholder="请输入性别">
    <button id="btn2">点击post请求</button>
</body>
</html>
<script type="module">
    import Api,{url,aa} from'./js/http.js'
    let api = new Api();
    console.log(api);

    let btn2 = document.getElementById('btn2');
    let btn1 = document.getElementById('btn1');
    let username = document.getElementById('username');
    let age = document.getElementById('age');
    let sex = document.getElementById('sex');
    let key = '99ba791ed87bf1596f8afbb21d6e04f2';
    btn1.onclick = function(){
        // fetch(`https://apis.tianapi.com/film/index?key=${key}&num=10`).then(res=>res.json()).then(data=>{
        //     console.log(data);
        // })
        api.get(`${url}/film/index?key=${key}&num=10`).then(data=>{
            console.log(data);
        })
    }
    btn2.onclick = function(){
        // fetch( `http://172.16.8.245:8080/post`, {
        //     method:'POST',
        //     headers:{
        //         'Content-Type':'application/json'
        //     },
        //     body:JSON.stringify({
        //         name:username.value,
        //         age:age.value,
        //         sex:sex.value
        //     })
        // }).then(res=>res.json()).then(data=>{
        //     console.log(data);
        // }).catch(err=>{
        //     console.log(err);
        // })
        let obj = {
            name:username.value,
                age:age.value,
                sex:sex.value
        }
        api.post(`${aa}/post`,obj).then(data=>{    
            console.log(data);
        }).catch(err=>{
            console.log(err);   
    })
    }
</script>