<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>修改密码</title>
    <link rel="stylesheet" href="../css/changePassword.css">
</head>
<body>
    <header>
        <span id="prev"><img src="../images/prev.png" alt=""></span>
        <span>修改密码</span>
        <span id="mulu"><img src="../images/mulu.png" alt=""></span>
    </header>

    <ul class="list">
        <li>
            <input type="text" placeholder="旧密码" name="" id="oldPwd">
        </li>
        <li>
            <input type="text" placeholder="新密码" name="" id="newPwd">
        </li>
        <li>
            <input type="text" placeholder="确认密码" name="" id="confirmPwd">
        </li>
    </ul>
    <p id="btn">修改密码</p>
</body>
</html>
<script src="../js/base.js"></script>
<script src="../js/axios.min.js"></script>
<script>

function $(ele){
    return document.querySelector(ele);
}
$('#prev').onclick = function () {
    history.back();
}

$('#btn').onclick = function () {
    var oldPwd = $('#oldPwd').value;
    var newPwd = $('#newPwd').value;
    var confirmPwd = $('#confirmPwd').value;
    if (oldPwd == '' || newPwd == '' || confirmPwd == '') {
        alert('密码不能为空');
        return;
    }
    if (newPwd!= confirmPwd) {
        alert('两次密码输入不一致');
        return;
    }
    axios.post('/user/changePwd', {
        oldPwd: oldPwd,
        newPwd: newPwd
    }).then(function (res) {
        if (res.data.code == 200) {
            alert('修改成功，请重新登录');
            location.href = './login.html';
        } else {
            alert(res.data.msg);
        }
    })
}
</script>