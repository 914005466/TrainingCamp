<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>有声小说</title>
    <link rel="stylesheet" href="../css/audioBook.css">
</head>
<body>
    <header>
        <span id="geren"><img src="../images/geren.png" alt=""></span>
        <span>有声小说</span>
        <span id="mulu"><img src="../images/mulu.png" alt=""></span>
    </header>
    <div class="tab">
        <p>子分类</p>
        <p class="orderBy">排序</p>
    </div>
    <div class="orderByCont">
        <p>人气最高</p>
        <p>浏览最多</p>
        <p>最新发布</p>
        <p>评分最高</p>
    </div>
    <ul class="list">
        <li>
            <div class="left"><img src="../images/1.png" alt=""></div>
            <div class="right">
                <p class="title">云殇倾城</p>
                <div class="rightCont">
                    <div class="rightCont_info">
                        <p>
                            <span><img src="../images/star1.png" alt=""></span>
                            <span><img src="../images/star1.png" alt=""></span>
                            <span><img src="../images/star1.png" alt=""></span>
                            <span><img src="../images/star1.png" alt=""></span>
                            <span><img src="../images/star1.png" alt=""></span>
                        </p>
                        <p>播音：<span>李刚</span></p>
                        <p>播放：<span>2536</span>次</p>
                    </div>
                    <p class="pingfen"><span>9.0</span>分</p>
                </div>
            </div>
        </li>

        
    </ul>
</body>
</html>
<script src="../js/axios.min.js"></script>
<script src="../js/base.js"></script>
<script>
let orderBy = document.querySelector('.orderBy');
let orderByCont = document.querySelector('.orderByCont');

let n=true;
orderBy.onclick = function(){
    if(n){
        orderByCont.style.display = 'block';
        n=false;
    }else{
        orderByCont.style.display = 'none';
        n=true;
    }
    
}

function $(ele){
    return document.querySelector(ele);
}
function audioPlay(){
    axios.get('/user/audioPlay').then(res=>{
        console.log(res.data);
        let arr = res.data.data;
        let ul = $('.list');
        ul.innerHTML = '';
        let html = '';
        for(let i=0;i<arr.length;i++){
            html += `<li>
            <div class="left"><img src="${arr[i].img}" alt=""></div>
            <div class="right">
                <p class="title">${arr[i].title}</p>
                <div class="rightCont">
                    <div class="rightCont_info">
                        <p>
                            <span><img src="../images/star2.png" alt=""></span>
                            <span><img src="../images/star2.png" alt=""></span>
                            <span><img src="../images/star2.png" alt=""></span>
                            <span><img src="../images/star2.png" alt=""></span>
                            <span><img src="../images/star2.png" alt=""></span>
                        </p>
                        <p>播音：<span>${arr[i].author}</span></p>
                        <p>播放：<span>${arr[i].playnum}</span>次</p>
                    </div>
                    <p class="pingfen"><span>${arr[i].score}</span>分</p>
                </div>
            </div>
        </li>`;
        }
        ul.innerHTML = html;

        for(let i=0;i<arr.length;i++){
            let star = arr[i].star;
            console.log(star);
            let html2 = '';
            for(let j=0;j<star;j++){
                html2 += `<span><img src="../images/star2.png" alt=""></span>`;
            }
            $('.list li:nth-child('+(i+1)+') .rightCont_info p:nth-child(1)').innerHTML = html2;
            for(let j=0;j<5-star;j++){
                html2 += `<span><img src="../images/star1.png" alt=""></span>`;
            }
            $('.list li:nth-child('+(i+1)+') .rightCont_info p:nth-child(1)').innerHTML = html2;
        }
            
    })
}
audioPlay();
</script>