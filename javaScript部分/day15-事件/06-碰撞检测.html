<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>碰撞检测</title>
    <style>
        * {

            margin: 0;


            padding: 0;

        }

        .wp {
            width: 50px;
            height: 50px;
            background: violet;
            position: absolute;
            left: 0;
            top: 0;
        }
        .black{
            width: 200px;
            height: 200px;
            position: absolute;
            left: 200px;
            top: 200px;
            background: black;
        }
    </style>
</head>

<body>
    <div class="wp">
        
    </div>
    <div class="black"></div>
</body>

</html>
<script>
 let wp = document.querySelector('.wp');    
 let black = document.querySelector('.black');

function rand(m,n){
    return Math.floor(Math.random()*(n-m+1)+m);
}
 
 //封装一个函数，用来判断两个元素是否碰撞
 function isStrike(obj1, obj2){
    let t1 = obj1.offsetTop;
    let l1 = obj1.offsetLeft;
    let r1 = l1 + obj1.offsetWidth;
    let b1 = t1 + obj1.offsetHeight;


    let t2 = obj2.offsetTop;
    let l2 = obj2.offsetLeft;
    let r2 = l2 + obj2.offsetWidth;
    let b2 = t2 + obj2.offsetHeight;

    if(t1>b2 || r1<l2 ||b1<t2 ||l1>r2){
        //没有碰撞
        return false;

    }else{
        //碰撞了
        return true;
    }
 }
 wp.onmousemove = function(){
    let disX = event.clientX - wp.offsetLeft;
    let disY = event.clientY - wp.offsetTop;
    
    document.onmousemove = function(){
        let left = event.clientX - disX;
        wp.style.left = left + 'px';
        let top = event.clientY - disY;
        wp.style.top = top + 'px';
        if(isStrike(wp,black)){
            wp.style.background = `rgb(${rand(0,255)},${rand(0,255)},${rand(0,255)})`;
            black.style.background = `rgb(${rand(0,255)},${rand(0,255)},${rand(0,255)})`;
        }
    };

 };
 document.onmouseup = function(){
    document.onmousemove = null;
 }
</script>